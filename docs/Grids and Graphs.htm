<!DOCTYPE html><html lang="en">
<head>

<meta charset="utf-8">
<title>Grids and Graphs</title>
<link rel="canonical" href="https://www.redblobgames.com/pathfinding/grids/graphs.html">
<!--DO NOT EDIT: generated from redblobgames/pathfinding/grids/graphs.bxml-->
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="preload" as="image" href="/img/transparent-blob.png">
<link rel="alternate" type="application/atom+xml" title="Blog posts" href="https://www.redblobgames.com/blog/posts.xml">
<meta name="theme-color" content="hsl(0,50%,45%)">
<style>:root{--hue: 0}:root{--bgurl: url(/img/transparent-blob.png)}body{--serif: "Iowan Old Style", Cambria, Georgia, serif;--sans-serif: "Avenir Next", Candara, Ubuntu, "Fira Sans", system-ui, "Segoe UI", sans-serif;--monospace: "Roboto Mono", "Cascadia Code", Consolas, monospace, "Segoe UI Symbol", Symbol;--body-width: calc(100vw - 2.25rem) ;--font-size: calc(.625rem + 1vw) ;--line-height: calc(1.5 * var(--font-size));font-family:var(--sans-serif);font-size:var(--font-size);font-size-adjust:ex-height .48;line-height:1.5em;min-height:95%}svg{font-size-adjust:none}@media(min-width:34.375em){body{--body-width: min(20.6rem + 33vw, 41.25rem);--font-size: calc(var(--body-width) / 33)}}main{font-family:var(--serif)}h1,h2,h3,h4,h5,h6,figcaption,.sans-serif{font-family:var(--sans-serif);text-wrap:balance}tt,code,kbd,samp,pre{font-family:var(--monospace);font-size:.9em}pre :is(tt,code,kbd,samp){font-size:unset}#table-of-contents{background-color:#fff;padding-left:1em;width:18em;float:right}#table-of-contents:after{clear:right}nav,#table-of-contents{font-family:var(--sans-serif);font-size:calc(var(--font-size) / 1.25);a{text-decoration-color:hsl(var(--hue),20%,90%)}}@media screen{header,section>h2{text-shadow:0px 2px 5px rgba(0,0,0,.8);text-rendering:optimizeLegibility}}h1{font-size:2em;margin:0;line-height:calc(1.5 * var(--line-height));.subheading{font-size:.5em;line-height:var(--line-height)}}sup,sub{position:relative;vertical-align:baseline;font-size:.75em;line-height:0;padding-left:.125em}sup{top:-.5em}sub{bottom:-.25em}details summary{cursor:pointer}*{box-sizing:border-box}html,body{margin:0;padding:0}html{background-color:#e4e4e0;color:#000}body{background-color:#fff;color:#333}header{display:block;text-align:center}header>h1{padding-top:var(--line-height)}@media screen{header,footer,.divider,section>h2{color:#fff;background-color:hsl(var(--hue),50%,45%);background-image:var(--bgurl),var(--bgurl),linear-gradient(180deg,hsl(var(--hue),50%,45%),hsl(var(--hue),75%,30%));background-position:0 0,16px 16px;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;a{color:hsl(var(--hue),40%,90%);background:unset;text-decoration:none;&:hover{background-color:#00000080;text-decoration:underline}}}}footer,.divider{a{text-decoration:underline}}main{margin-inline:0;padding-inline:0}section{margin:var(--line-height) 0}section>*{width:var(--body-width);max-width:100%}.comments{width:calc(1.5 * var(--body-width));max-width:100%}@media screen{.comments,.below-divider{background-color:#e6e6e5}}.comments{padding-bottom:1.25em;font-size:1em;.comment-author{text-shadow:1px 1px 3px #fff}}section>h2{--h2-margin: 3em;margin:var(--line-height) auto;padding:calc(var(--line-height) / 2 - 1px) 0;font-size:1.25em;width:calc(2 * var(--h2-margin) + var(--body-width));max-width:100%;>span{display:inline-block;margin-left:var(--h2-margin)}a.anchor{float:right;width:calc(var(--h2-margin));text-align:center;color:hsl(var(--hue),50%,45%)}&:hover a.anchor{color:hsl(var(--hue),20%,80%)}}h3{--h2-margin: 3em;margin:var(--line-height) auto;font-size:1.125em;a.anchor{float:right;width:calc(var(--h2-margin));text-align:center;color:hsl(var(--hue),20%,80%);@media(min-width:34.375em){margin-right:calc(0em - var(--h2-margin))}}}h4 a.anchor,h5 a.anchor,h6 a.anchor{padding-left:1em;color:hsl(var(--hue),20%,80%)}h3:hover a.anchor,h4:hover a.anchor,h5:hover a.anchor,h6:hover a.anchor{color:hsl(var(--hue),50%,40%)}header nav{display:block;ul{display:flex;flex-flow:row wrap;justify-content:center;line-height:1;margin:0;li{display:inline-block;padding:.1em .3em;text-align:center;flex:0 0 4em;align-self:center;white-space:nowrap;a{display:block;font-weight:700;text-decoration:none}}}}header,.divider,section>h2{border-bottom:1px solid #000}.divider,section>h2{border-top:1px solid #000}.divider{min-height:calc(2 * var(--line-height));text-align:center}.below-divider{padding-top:var(--line-height);border-bottom:1px solid black;>p:first-child{font-size:1.25em;text-align:center;margin-top:0}}footer{--footer-padding-y: calc(var(--line-height) / 2);--footer-padding-x: var(--font-size);padding:var(--footer-padding-y) var(--footer-padding-x);border-top:1px solid #000}footer>div>address{display:block}footer>div>*{text-align:center}@media(min-width:50em){footer>div{margin:0 auto;display:flex;flex-flow:row wrap;justify-content:center;max-width:calc(2 * var(--body-width));width:calc(100vw - 2 * var(--footer-padding-x))}footer>div>address{flex:0 1 20em;align-self:center;text-align:left}footer>div>div{flex:1 1 20em;align-self:center;text-align:right}footer>div>div>p,footer>div>div>div{margin-top:0}}h2:target{animation:target-attention .4s 1;font-size:2em}@keyframes target-attention{0%{transform:scale(1.1)}to{transform:scale(1.1)}}div:target{border:1px dashed #888}kbd kbd{padding:.1em .4em;margin:0 .1em .2em;font-size:.75em;white-space:nowrap;background-color:#ddd;color:#242;border:1px solid rgba(0,0,0,.2);border-radius:.2em;box-shadow:inset 0 0 1px 1px #fff,0 2px #0000004d}samp,kbd{background-color:#f3f3f2}code,samp{color:#442}kbd{margin:0 .4em;color:#252}section li::marker{font-family:var(--sans-serif);color:hsl(var(--hue),50%,40%)}main ::target-text{background-color:hsl(var(--hue),20%,80%);color:#000}img{max-width:100%;height:auto;-ms-interpolation-mode:bicubic}section figcaption{font-size:.75em;line-height:1.1;text-align:center}a{color:hsl(var(--hue),50%,45%);text-decoration-color:hsl(var(--hue),20%,80%);text-underline-offset:.25em;&:hover{text-decoration:underline;text-decoration-color:hsl(var(--hue),50%,45%);background:hsla(var(--hue),50%,50%,.1)}}:focus-visible{outline-color:hsl(var(--hue),50%,45%)}.draft{font-family:var(--serif);font-size:calc(4 * var(--font-size));letter-spacing:-.1em;color:#eee;opacity:.5;text-align:center;transform:rotate(-5deg);line-height:1;position:absolute;top:0;height:0;left:25%;width:50%;pointer-events:none}@media(min-width:34.375em){section p,section li{hanging-punctuation:first last;text-wrap:pretty;hyphens:auto;hyphenate-limit-chars:7}code,kbd,pre{hyphens:none}}nav,.section-number,address,time{font-variant-numeric:oldstyle-nums}.w-auto,section>.w-auto{width:auto}.w-full,section>.w-full{width:100%}.w-150b,section>.w-150b{width:calc(1.5 * var(--body-width))}.select-none{user-select:none;-webkit-user-select:none}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-sm{font-size:.875em}.font-sans{font-family:var(--sans-serif)}.font-serif{font-family:var(--serif)}.font-mono{font-family:var(--monospace)}.normal-nums{font-variant-numeric:normal}.oldstyle-nums{font-variant-numeric:oldstyle-nums}p,figure,ul,ol{margin:var(--line-height) 0}header>*,section>*,footer>*,main>address,.comments{margin-inline:auto}figure{text-align:center;pre{text-align:left}img,svg,canvas{max-width:100%}}li>ul,li>ol{margin-top:0;margin-bottom:0}dt{font-weight:700}pre{width:var(--body-width);max-width:100%;line-height:1.4;overflow:auto;border-block:1px solid #ccc;border-inline-width:0}pre.simple,.comments pre{overflow:auto;width:calc(var(--body-width) * 1.2);border:none;background:transparent;background-color:transparent;box-shadow:none}pre.snippet,pre.src{border-top-style:dashed;border-bottom-style:dashed}section>pre:only-child{padding-bottom:var(--font-size);border-bottom:1px solid rgba(0,0,0,.5)}blockquote{font-style:italic;text-wrap:balance}table.standard2024{font-family:var(--sans-serif);font-size:.875em;border:2px solid white;border-collapse:collapse;overflow-x:auto;th{background-color:#e8e8e3;border:2px solid white;padding:0 .5em}td{background-color:#fff;border:1px solid hsl(60,5%,95%);border-right-color:#babaab;padding:0 .5em}thead{border-bottom:2px solid hsl(60,10%,70%);th{background:linear-gradient(to top,#e8e8e3,#f4f4f1,#fafaf9)}}}table.standard{font-family:var(--sans-serif);font-size:.875em;border-block:2px solid hsl(var(--hue),10%,50%);border-collapse:collapse;overflow-x:auto;text-align:left;td,th{border-bottom:1px solid hsl(60,5%,95%);padding:0 .5em}:is(td,th):not(:last-child){border-right:1px solid hsl(60,10%,70%)}td{background-color:hsl(var(--hue),10%,97%);border-bottom-color:#fff}tbody,thead{border-bottom:2px solid hsl(var(--hue),10%,50%);vertical-align:bottom}tfoot{border-top:2px solid hsl(var(--hue),10%,50%);vertical-align:bottom}thead th{background:linear-gradient(to top,hsl(var(--hue),10%,85%),hsl(var(--hue),15%,87%),hsl(var(--hue),15%,90%));border-bottom:unset}tbody th{background-color:hsl(var(--hue),10%,95%);border-bottom:1px solid white}tr:hover :is(td,th){background-color:hsl(var(--hue),25%,93%)}}aside,p.note,div.note>p{width:calc(var(--body-width) - 2em);padding:1em;background:#eee;border:1px solid #ddd;box-shadow:0 8px 6px -6px #0006}tt,code{padding:0 2px}pre :is(tt,code){padding:unset}main>address,section>address,section>time{display:block;width:var(--body-width);max-width:100%;font-family:var(--sans-serif);text-align:right}form{margin:0}input{accent-color:hsl(var(--hue),50%,50%)}input[type=text]{max-width:100%;border:1px solid rgba(0,0,0,.7);background-color:#f8f8f4;color:#000;text-align:center;font-weight:700;&:focus{background-color:#fffff4}}input::placeholder{color:#aaa}input[type=search][name=q]{box-shadow:inset 0 .1em .3em #00000080;border-radius:.6em;padding:.3em .6em;border-width:0}button{touch-action:manipulation;cursor:pointer;user-select:none}.TODO{color:#bf4040;background:#e8e3e3;border:1px solid hsl(0,50%,50%);margin-left:.5ex}.DONE{color:#4040bf;background:#e3e3e8;border:1px solid hsl(240,50%,50%)}.src{.constant{font-style:oblique}.comment-delimiter,.nxml-comment-delimiter{color:#48f}.comment,.nxml-comment-content{color:#069}.builtin{color:#508b20}.warning{color:#c00}.function-name{color:#268bd2;font-weight:700}.variable-name{font-weight:700;color:#5c3d5c}.type{color:#6c71c4}.constant-face{color:#d33682}.doc{color:#666;background-color:#e2e6e8}.string{color:#888}.preprocessor{color:#859900}.negation-char,.sh-escaped-newline{color:red}.todo{color:#fff;background:#dc322f}.note{color:#fff;background:#2aa198}.hack{color:#fff;background:#859900}.operator{color:#000;font-weight:700}.paren{color:#a0a090;font-weight:700}.keyword{color:#679;font-weight:700}.minor-control-construct{color:#406abf;font-weight:700}.major-control-construct{color:#bf4040}}.src-cpp{.constant{color:#999}}.src-emacs-lisp{.paren{color:#c9c9c4}}.src-sh{.string,.comment{color:inherit}}.src-python{.highlight-indentation{border-right:2px solid #eeeeee}}.src-css{.css-selector{color:#478547}.css-property{color:#406abf}}.src-xml{.nxml-element-prefix{color:#bf40bf}.nxml-element-local-name{color:#406abf;font-weight:400}.nxml-attribute-local-name{color:#478547}.nxml-element-colon{color:#a3adc2}.nxml-tag-delimiter,.nxml-tag-slash{color:#9cabc9;font-weight:700}}table.standard td.left,table.standard th.left{text-align:left}table.standard td.center,table.standard th.center{text-align:center}table.standard td.right,table.standard th.right{text-align:right}@media screen{*[class^=section-number]{color:hsl(var(--hue),20%,50%)}h2 .section-number{display:inline-block;margin-left:0;padding-left:.5em;text-align:center;width:var(--h2-margin);color:hsl(var(--hue),50%,80%)}h2 .section-number+span{margin-left:0}h3>.section-number{float:left;text-align:center;width:2.7em;margin-right:.3em;color:hsl(var(--hue),25%,90%);background:hsl(var(--hue),50%,50%);background-image:var(--bgurl),var(--bgurl);background-position:0 0,16px 16px;border-radius:.25em;text-shadow:0px 2px 5px rgba(0,0,0,.8)}@media(min-width:34.375em){h3>.section-number{height:2em;margin-left:-3em;margin-top:-.3em;padding-top:.3em;border-block:1px solid black}h3>a.anchor{background:url(https://www.redblobgames.com/img/svg-blob-mini.svg) no-repeat center center;background-size:2cap 2cap}h3:hover>a.anchor{background:none}}}.print-endnote{display:none}@media print{@page{margin:.5in}body{--font-size: 14pt;--serif: "Book Antiqua", "Times New Roman", serif;--sans-serif: "Helvetica", sans-serif;--monospace: "Courier", "Courier New", monospace}h2,h3{page-break-after:avoid}figure{page-break-inside:avoid}p,li{orphans:5;widows:5}section p a,section li a{text-decoration:underline;text-decoration-color:#ddd}header nav,.comments{display:none}.print-endnote{display:unset}.print-endnote li{list-style-type:none;word-break:break-all}.print-endnote img{width:2.5em;vertical-align:bottom}}

@media print{header::before{position:absolute;right:0;top:0;content:url(https://chart.apis.google.com/chart?chs=120x120&cht=qr&chl=https%3A%2F%2Fwww.redblobgames.com%2Fpathfinding%2Fgrids%2Fgraphs.html);}}
	  
    svg { pointer-events: none; }
    .node, .edge { pointer-events: visible; }
    
    #grid-graph { text-align: center; }

    svg .axis { stroke-width: 7px; }
    svg .edge, svg .axis { stroke: hsl(160, 30%, 50%); }
    svg .edge.highlight { stroke: hsl(0, 60%, 60%); }

    svg .node, svg .tile { fill: hsl(230, 50%, 60%); stroke: hsl(230, 30%, 50%); }
    svg .node.highlight { fill: hsl(0, 60%, 60%); stroke: hsl(0, 30%, 50%); }
    
    svg .nodelabel { fill: hsl(0, 0%, 100%); }

    #graph-description .edge { color: hsl(160, 30%, 50%); padding: 0 0.2em; margin: 0 0.4em; }
    #graph-description .edge.highlight { color: hsl(0, 60%, 60%); background: hsl(60, 10%, 90%); }
    
    #graph-description .node { background: hsl(230, 50%, 60%); border: 1px solid hsl(230, 30%, 50%); color: hsl(0, 0%, 100%); text-align: center; padding: 0 0.2em; margin: 0 0.2em; border-radius: 8px; }
    #graph-description .node.highlight { background: hsl(0, 60%, 60%); border-color: hsl(0, 30%, 50%); }
    
    pre { background: none; box-shadow: none; }
    pre b { background-color: #ffc; padding: 2px 0; }
    
    .var_edge { color: hsl(160, 50%, 40%); font-weight: bold; font-style: normal; }
    .var_node { color: hsl(230, 50%, 55%); font-weight: bold; font-style: normal; }
  </style>
<script>function $l(s,e,d){d=document;if(d.location.hostname!='localhost'){e=d.createElement('script');e.async=true;e.src=s;e.dataset.timestamp=+new Date();d.body.appendChild(e)}}</script>
</head>
<body class="gameprog">
<header><h1>Grids and Graphs</h1>
<div class="subheading">
                 from <a href="https://www.redblobgames.com/">Red Blob Games</a>
</div>
<nav><search><form action="https://www.google.com/search" target="_blank">
<ul> <li><a href="https://www.redblobgames.com/">Home</a></li> <li><a href="https://www.redblobgames.com/blog/">Blog</a></li> <li><a href="https://pinboard.in/u:amitp/t:gamedev/">Links</a></li> <li><a href="https://bsky.app/profile/redblobgames.com">Bluesky</a></li> <li><a rel="me" href="http://www-cs-students.stanford.edu/~amitp/">About</a></li> <li> </li> <li><input type="search" name="q" placeholder="Search" size="8"></li>
</ul>
<input type="hidden" name="hq" value="site:www.redblobgames.com OR site:theory.stanford.edu/~amitp/ OR site:www-cs-students.stanford.edu/~amitp/ OR site:amitp.blogspot.com OR site:simblob.blogspot.com">
</form></search></nav></header><main><section><p>Graph search algorithms like Dijkstra’s Algorithm and A* work on <strong>weighted directed graphs</strong>, sets of nodes connected by edges that have numeric weights (movement costs) attached to them. Can they also work on grids? Yes: a grid can be viewed as a special case of a graph.</p>
<div id="grid-graph">
<button onclick="gg.draw_graph()" style="font-size:large">See the graph</button> or <button onclick="gg.draw_grid()" style="font-size:large">See the grid again</button><br><img class="remove_me" src="graphs.png?2014-04-14-09-34-11">
</div>
<p>This article is an introduction to the parts of graph theory we use in graph-based pathfinding algorithms, and how grids are represented.</p></section><section><h2 id="properties">
<span><a href="#properties">Properties of graphs</a></span><a class="anchor" href="#properties">#</a>
</h2>
<p>A graph-based pathfinding algorithm needs to know <em>what the locations are</em> and also <em>which locations are connected to which other ones</em>. You typically know a lot more than this, like the size and coordinates of the locations, but the algorithm doesn’t actually know about these aspects. It only knows what the connections are.</p>
<div id="non-grid-graph-1"></div>
<p>A mathematical graph is a set of <em class="var_node">nodes</em> and <em class="var_edge">edges</em>. The nodes (also called vertices or objects) are connected together by the edges (also called links or connections or arrows or arcs). For any graph we need to know two things:</p>
<ol>
<li>
<strong class="var_node">Set of nodes</strong> in the graph</li>
<li>
<strong class="var_edge">Set of edges</strong> from each node</li>
</ol>
<p>What does the above graph look like?</p>
<ol id="graph-description">
<li>
<strong class="var_node">Set of nodes</strong>: <span class="nodelist"></span>.</li>
<li>
<strong class="var_edge">Set of edges</strong> from each node: <ul class="edgelist"></ul>
</li>
</ol>
<p>Note that the layout of the graph is not part of the graph. The graph in the above diagram and the graph shown below <em>are the same graph</em>:</p>
<div id="non-grid-graph-2"></div>
<p>Try it for yourself: make a list of the nodes in the graph, and then make a list of the edges connected to each node. You’ll get the same answer for both diagrams.</p>
<p>Graph search algorithms don’t really “understand” the layout or properties of a grid. They <em>only</em> understand the connectivity. Pathfinding algorithms that can harness the additional properties of a grid can run more quickly than regular A*. I’ll explore that in another article.</p>
<p>Let’s see how to encode a grid in graph form.</p></section><section><h2 id="grids">
<span><a href="#grids">Grids in graph form</a></span><a class="anchor" href="#grids">#</a>
</h2>
<p>When working with a square grid, we need to make a list of nodes. We aren’t limited to rectangles, but for simplicity, here’s the code for a 20x10 rectangle:</p>
<pre class="snippet"><span class="var_node">all_nodes</span> = []
for x in range(20):
    for y in range(10):
        <span class="var_node">all_nodes</span>.append([x, y])</pre>
<p>The edges are going to be the four directions: east, north, west, south. For any node we need to know the other nodes connected to this one by an edge. We call these <em>neighbors</em>:</p>
<pre class="snippet">def neighbors(<span class="var_node">node</span>):
    <span class="var_edge">dirs</span> = [[1, 0], [0, 1], [-1, 0], [0, -1]]
    result = []
    for <span class="var_edge">dir</span> in <span class="var_edge">dirs</span>:
        result.append([<span class="var_node">node</span>[0] + <span class="var_edge">dir</span>[0], <span class="var_node">node</span>[1] + <span class="var_edge">dir</span>[1]])
    return result</pre>
<p>If your game allows diagonal movement, you’ll have eight entries in <code>dirs</code>.</p>
<p>However, we want to return only the nodes that we can move to, so we’ll add a check:</p>
<pre class="snippet">def neighbors(<span class="var_node">node</span>):
    <span class="var_edge">dirs</span> = [[1, 0], [0, 1], [-1, 0], [0, -1]]
    result = []
    for <span class="var_edge">dir</span> in <span class="var_edge">dirs</span>:
        neighbor = [<span class="var_node">node</span>[0] + <span class="var_edge">dir</span>[0], <span class="var_node">node</span>[1] + <span class="var_edge">dir</span>[1]]
        if neighbor in <span class="var_node">all_nodes</span>:
            result.append(neighbor)
    return result</pre>
<p>An alternate way to check is to make sure the coordinates are in range. This only works if the map is rectangular. Here’s code for the 20x10 map we generated earlier:</p>
<pre class="snippet">def neighbors(<span class="var_node">node</span>):
    <span class="var_edge">dirs</span> = [[1, 0], [0, 1], [-1, 0], [0, -1]]
    result = []
    for <span class="var_edge">dir</span> in <span class="var_edge">dirs</span>:
        neighbor = [<span class="var_node">node</span>[0] + <span class="var_edge">dir</span>[0], <span class="var_node">node</span>[1] + <span class="var_edge">dir</span>[1]]
        if 0 &lt;= <span class="var_node">neighbor</span>[0] &lt; 20 and 0 &lt;= <span class="var_node">neighbor</span>[1] &lt; 10:
            result.append(neighbor)
    return result</pre>
<p>In practice, we will want to annotate the graph with additional information, such as whether you can walk over a square.</p></section><section><h2 id="variants">
<span><a href="#variants">Variants</a></span><a class="anchor" href="#variants">#</a>
</h2>
<p>I glossed over how edges are handled. In graph theory, there are several ways to handle edges:</p>
<ul>
<li>An <strong>undirected</strong> graph has edges that go in both directions. This is pretty common for game maps. In the example earlier, each undirected edge such as B↔C was listed twice, once as B→C and once as C→B.</li>
<li>A <strong>directed</strong> graph has edges that can go one direction but not the other. One-way doors, jumping off a ledge, and portals can be one way edges in games. A graph can have edge B→C without having edge C→B.</li>
<li>A <strong>multigraph</strong> can have multiple edges between the same nodes. Being able to swim across a river or take a raft across the same river is an example in games. Node B could have more than one edge B→C leading to node C.</li>
</ul>
<p>In addition, you can annotate nodes and edges with extra information. One annotation that shows up often in pathfinding algorithms is edge weights. A <strong>weighted</strong> graph allows numeric weights on each edge. In a weighted undirected graph, we might mark a paved road as weight 1 and a twisty forest path as weight 4 to make the pathfinder favor the road. In a weighted directed graph, we might mark downhill edge B→C with weight 2 and mark uphill edge C→B with weight 5 to make it easier to walk downhill.</p></section><section><h2 id="obstacles">
<span><a href="#obstacles">Obstacles</a></span><a class="anchor" href="#obstacles">#</a>
</h2>
<p>How do we represent a grid’s obstacles in a graph form? There are three general strategies:</p>
<ol>
<li>
<strong>Remove nodes</strong>. If obstacles occupy grid squares, you can remove those nodes from the graph (<span class="var_node">all_nodes</span>). You also need to remove the corresponding edges, which happens automatically if you’re using “<code>if neighbor in all_nodes</code>” to test whether an edge is added, but not if you’re testing whether x/y are in range.</li>
<li>
<strong>Remove edges</strong>. If obstacles occupy the borders between squares, you can remove those edges from the graph by adding an additional check in the <code>neighbors()</code> function. If obstacles occupy the squares, you can remove the edges that lead to those squares.</li>
<li>
<strong>Infinite weight edges</strong>. If obstacles occupy the borders between squares, you can mark those edges with Infinity as the weight. If obstacles occupy the squares, you can mark edges leading to obstacles as having Infinity as the weight. In your graph search function, you’ll have to exit before visiting nodes with Infinity as the cost.</li>
</ol>
<p>Altering the weights may be easier if you want to change the obstacles after the graph is constructed.</p></section><section><h2 id="more">
<span><a href="#more">More</a></span><a class="anchor" href="#more">#</a>
</h2>
<p>Why do I keep using grids with my pathfinding tutorials? Because they’re easy to use, and were incredibly common back when I started working on games. They work with graph-based pathfinding algorithms. I plan to build some demos of non-grid pathfinding graphs too, but grids are easier to explain.</p>
<p>I didn’t cover alternate representations of edges. I typically use a list of edges per node, but you could also use a global set of edges, or a matrix representation that keeps track of which pairs of nodes have an edge between them. Read more <a href="https://en.wikipedia.org/wiki/Graph_(data_structure)#Representations">on Wikipedia</a><sup class="print-endnote">[1]</sup>.</p>
<p>I also didn’t cover graphs for other uses in games. Although graph search is an obvious match for pathfinding on maps, you can also use it for lots of other problems. You could represent rooms (nodes) and hallways (edges) in a dungeon exploration game. You could represent players (nodes) and their friendships (edges) in a social game. You could represent <a href="https://web.archive.org/web/20140214065338/http://www.altdevblogaday.com/2011/02/24/introduction-to-behavior-trees/">possible behaviors as a graph</a><sup class="print-endnote">[2]</sup> and then search over it to decide which behavior to execute. You could represent all <a href="https://en.wikipedia.org/wiki/Game_tree">possible board configurations as nodes</a><sup class="print-endnote">[3]</sup> and game moves as edges and then search over a portion of it to decide how to move. You could represent an <a href="http://gameprogrammingpatterns.com/state.html">NPC’s state as a node</a><sup class="print-endnote">[4]</sup> and the actions as edges. You could represent conversation topics in an NPC dialog database. You could use graphs for generating rivers and roads in <a href="http://www-cs-students.stanford.edu/~amitp/game-programming/polygon-map-generation/">a map generator</a><sup class="print-endnote">[5]</sup>. You could represent your game’s economy as a graph, with wheat and bread as nodes and baking as an edge. 3D polygonal meshes can also be viewed as graphs. Graphs are a neat abstraction. If you can make your data look like a graph, you can reuse a wide variety of graph algorithms.</p>
<p>There’s lots more written about graphs and graph theory. <a href="https://plus.maths.org/content/graphs-and-networks">Plus magazine</a><sup class="print-endnote">[6]</sup> has lots of links to interesting uses of graphs and <a href="https://en.wikipedia.org/wiki/Graph_(mathematics)">Wikipedia</a><sup class="print-endnote">[7]</sup> may also be a reasonable starting point.</p></section></main><div class="below-divider">
<p>Email me <a class="email" rel="me" href="mailto:redblobgames@gmail.com">redblobgames@gmail.com</a>, or comment here:</p>
<div class="print-endnote">
<h3>Links</h3>
<ol>
<li>[1]: https://en.wikipedia.org/wiki/Graph_(data_structure)#Representations</li>
<li>[2]: https://web.archive.org/web/20140214065338/http://www.altdevblogaday.com/2011/02/24/introduction-to-behavior-trees/</li>
<li>[3]: https://en.wikipedia.org/wiki/Game_tree</li>
<li>[4]: http://gameprogrammingpatterns.com/state.html</li>
<li>[5]: http://www-cs-students.stanford.edu/~amitp/game-programming/polygon-map-generation/</li>
<li>[6]: https://plus.maths.org/content/graphs-and-networks</li>
<li>[7]: https://en.wikipedia.org/wiki/Graph_(mathematics)</li>
</ol>
</div>
<div class="comments" role="complementary">
<div id="disqus_thread"><button style="padding:1em;width:100%" onclick="$disqus()">Load <b>comments</b> from Disqus</button></div>
<script>
var DISQUS_URL="http://www.redblobgames.com/pathfinding/grids/graphs.html";
function disqus_config(){this.page.url=DISQUS_URL}
function $disqus(){$disqus=()=>{};$l("https://redblobgames.disqus.com/embed.js")}
if(document.location.hash.match(/#comment/))setTimeout($disqus,0)
else if(false) {new IntersectionObserver(e=>{if(e[0].isIntersecting)$disqus()}).observe(document.getElementById('disqus_thread'))}
else {window.DISQUSWIDGETS={displayCount(r){let c=r?.counts?.[0]?.comments;document.querySelector("#disqus_thread b").textContent=`${c??0} comment${c!=1?'s':''}`}};$l("https://redblobgames.disqus.com/count-data.js?2="+encodeURIComponent(DISQUS_URL))}
</script><noscript><a href="https://redblobgames.disqus.com/?url=https://www.redblobgames.com/pathfinding/grids/graphs.html">View the discussion thread.</a></noscript>
</div>
</div>
<footer><div>
<address>
		  Copyright © <time>2025</time>
                       <a rel="author home copyright" href="https://www.redblobgames.com/">Red Blob Games</a><br><a href="https://www.redblobgames.com/blog/posts.xml"><svg viewBox="0 0 30 30" height="0.8em"><rect width="30" height="30" rx="5" fill="orange"></rect><circle cx="7" cy="23" r="4" fill="white"></circle><path d="M 5,5 A 20,20,0,0,1,25,25 M 5,13 A 12,12,0,0,1,17,25" fill="none" stroke="white" stroke-width="4" stroke-linecap="square"></path></svg>RSS Feed</a>
</address>
<div>
	       <script src="/js/d3.v3.min.js?2018-09-10-13-57-03"></script><script src="_graphs.js?2018-12-04-12-34-39"></script> Created 15 Feb 2013 with <a href="https://d3js.org/">D3.js v3</a> and <a href="https://www.typescriptlang.org/">TypeScript</a>;  <!-- hhmts start -->Last modified: 09 Jan 2023<!-- hhmts end -->
</div>
</div></footer>
</body>
</html>
